<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neon Overload ‚Äì Minigame Arena</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-red: #ff0055;
            --bg-dark: #050505;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Orbitron', sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            user-select: none;
        }

        /* UI Overlay */
        .ui-layer {
            position: absolute;
            top: 20px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            box-sizing: border-box;
            z-index: 10;
            pointer-events: none;
        }

        .player-score {
            color: var(--neon-blue);
            text-shadow: 0 0 10px var(--neon-blue);
            font-size: 1.5rem;
        }

        .enemy-score {
            color: var(--neon-red);
            text-shadow: 0 0 10px var(--neon-red);
            font-size: 1.5rem;
        }

        /* Game Arena */
        .arena {
            position: relative;
            width: 100%;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
        }

        /* The Energy Beam */
        .beam-container {
            position: relative;
            width: 80%;
            height: 60px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #333;
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
        }

        .beam-clash-point {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 4px;
            background: white;
            box-shadow: 0 0 20px 10px white;
            z-index: 5;
            transition: left 0.1s linear;
        }

        .beam-left {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 50%;
            /* Dynamic */
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.2) 0%, rgba(0, 243, 255, 1) 100%);
            box-shadow: 0 0 30px var(--neon-blue);
            transition: width 0.1s linear;
        }

        .beam-right {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            width: 50%;
            /* Dynamic */
            background: linear-gradient(-90deg, rgba(255, 0, 85, 0.2) 0%, rgba(255, 0, 85, 1) 100%);
            box-shadow: 0 0 30px var(--neon-red);
            transition: width 0.1s linear;
        }

        /* Characters / Generators */
        .generator {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 0 20px;
        }

        .gen-left {
            left: 5%;
            border-color: var(--neon-blue);
            box-shadow: 0 0 20px var(--neon-blue);
            color: var(--neon-blue);
        }

        .gen-right {
            right: 5%;
            border-color: var(--neon-red);
            box-shadow: 0 0 20px var(--neon-red);
            color: var(--neon-red);
        }

        /* Timing Bar (The Core Mechanic) */
        .timing-container {
            position: relative;
            width: 600px;
            height: 40px;
            background: #111;
            border: 2px solid #444;
            border-radius: 20px;
            margin-bottom: 50px;
            overflow: hidden;
            cursor: pointer;
        }

        .sweet-spot {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 40%;
            width: 20%;
            /* The hit zone */
            background: rgba(0, 243, 255, 0.3);
            border-left: 2px solid var(--neon-blue);
            border-right: 2px solid var(--neon-blue);
            box-shadow: 0 0 15px var(--neon-blue) inset;
        }

        .cursor {
            position: absolute;
            top: -5px;
            bottom: -5px;
            width: 4px;
            background: white;
            box-shadow: 0 0 10px white;
            left: 0%;
            will-change: left;
        }

        /* Instructions */
        .instructions {
            position: absolute;
            bottom: 120px;
            color: #888;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.5;
            }
        }

        /* Feedback Effects */
        .hit-effect {
            position: absolute;
            pointer-events: none;
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
            animation: floatUp 0.5s forwards;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(-50px) scale(1.5);
                opacity: 0;
            }
        }

        .shake {
            animation: shake 0.3s cubic-bezier(.36, .07, .19, .97) both;
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-1px, 0, 0);
            }

            20%,
            80% {
                transform: translate3d(2px, 0, 0);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-4px, 0, 0);
            }

            40%,
            60% {
                transform: translate3d(4px, 0, 0);
            }
        }

        /* Mobile Responsive */
        @media (max-width: 700px) {
            .timing-container {
                width: 90%;
            }

            .generator {
                width: 60px;
                height: 60px;
                font-size: 1rem;
            }
        }

        .nav-back {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
            opacity: 0.7;
            z-index: 20;
        }
    </style>
</head>

<body>

    <a href="/" class="nav-back">‚Üê BACK TO HUB</a>

    <div class="ui-layer">
        <div class="player-score">YOU</div>
        <div class="enemy-score">RIVL BOT</div>
    </div>

    <div class="arena">
        <div class="generator gen-left">‚ö°</div>

        <div class="beam-container">
            <div class="beam-left" id="beamLeft"></div>
            <div class="beam-right" id="beamRight"></div>
            <div class="beam-clash-point" id="clashPoint"></div>
        </div>

        <div class="generator gen-right">üíÄ</div>
    </div>

    <div class="instructions">Click / Spacebar when cursor is in blue zone</div>

    <div class="timing-container" id="clickArea">
        <div class="sweet-spot" id="sweetSpot"></div>
        <div class="cursor" id="cursor"></div>
    </div>

    <script>
        // Game State
        let gameActive = false;
        let balance = 50; // 0 = Enemy Wins, 100 = Player Wins, 50 = Neutral
        let cursorPosition = 0;
        let cursorDirection = 1; // 1 = right, -1 = left
        let cursorSpeed = 1.5; // Increases as you play

        // DOM Elements
        const beamLeft = document.getElementById('beamLeft');
        const beamRight = document.getElementById('beamRight');
        const clashPoint = document.getElementById('clashPoint');
        const cursor = document.getElementById('cursor');
        const sweetSpot = document.getElementById('sweetSpot');
        const clickArea = document.getElementById('clickArea');

        // Config
        const SWEET_SPOT_START = 40; // %
        const SWEET_SPOT_WIDTH = 20; // %
        const SWEET_SPOT_END = SWEET_SPOT_START + SWEET_SPOT_WIDTH;

        // Audio (Simple synth for now)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            if (type === 'hit') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(440, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'miss') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.2);
                gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.2);
            }
        }

        function startGame() {
            gameActive = true;
            gameLoop();
            enemyAI();
        }

        function updateVisuals() {
            // Update Beam
            beamLeft.style.width = `${balance}%`;
            beamRight.style.width = `${100 - balance}%`;
            clashPoint.style.left = `${balance}%`;

            // Color shift based on dominance
            if (balance > 60) {
                document.body.style.boxShadow = `inset 0 0 50px rgba(0, 243, 255, ${(balance - 50) / 100})`;
            } else if (balance < 40) {
                document.body.style.boxShadow = `inset 0 0 50px rgba(255, 0, 85, ${(50 - balance) / 100})`;
            } else {
                document.body.style.boxShadow = 'none';
            }
        }

        function gameLoop() {
            if (!gameActive) return;

            // Move Cursor
            cursorPosition += cursorSpeed * cursorDirection;

            // Bounce Logic
            if (cursorPosition >= 100) {
                cursorPosition = 100;
                cursorDirection = -1;
            } else if (cursorPosition <= 0) {
                cursorPosition = 0;
                cursorDirection = 1;
            }

            cursor.style.left = `${cursorPosition}%`;

            requestAnimationFrame(gameLoop);
        }

        function enemyAI() {
            if (!gameActive) return;

            // Enemy pushes back constantly but slowly
            // If player is winning (balance > 50), enemy fights harder
            const pressure = 0.1 + (balance > 50 ? 0.15 : 0);

            balance -= pressure;
            checkWinCondition();
            updateVisuals();

            if (gameActive) requestAnimationFrame(enemyAI);
        }

        function handleInput() {
            if (!gameActive) return;

            // Check Hit
            if (cursorPosition >= SWEET_SPOT_START && cursorPosition <= SWEET_SPOT_END) {
                // HIT!
                const accuracy = 1 - (Math.abs(cursorPosition - (SWEET_SPOT_START + SWEET_SPOT_WIDTH / 2)) / (SWEET_SPOT_WIDTH / 2));
                const power = 5 * accuracy + 2; // Base push + accuracy bonus

                balance += power;
                cursorSpeed = Math.min(cursorSpeed + 0.1, 4); // Game gets faster

                playSound('hit');
                createFeedback('PERFECT!', 'var(--neon-blue)');
            } else {
                // MISS!
                balance -= 5; // Penalty
                cursorSpeed = Math.max(cursorSpeed - 0.2, 1.5); // Slow down slightly on fail

                playSound('miss');
                document.body.classList.add('shake');
                setTimeout(() => document.body.classList.remove('shake'), 300);
                createFeedback('MISS', 'var(--neon-red)');
            }

            checkWinCondition();
            updateVisuals();
        }

        function createFeedback(text, color) {
            const el = document.createElement('div');
            el.classList.add('hit-effect');
            el.textContent = text;
            el.style.color = color;
            el.style.left = '50%';
            el.style.top = '70%';
            el.style.transform = 'translate(-50%, -50%)';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 500);
        }

        function checkWinCondition() {
            if (balance >= 100) {
                gameOver(true);
            } else if (balance <= 0) {
                gameOver(false);
            }
        }

        function gameOver(playerWon) {
            gameActive = false;
            const msg = playerWon ? "VICTORY" : "DEFEAT";
            const color = playerWon ? "var(--neon-blue)" : "var(--neon-red)";

            alert(`${msg}! Refresh to play again.`);
            location.reload();
        }

        // Input Listeners
        window.addEventListener('keydown', (e) => {
            if (e.code === 'Space') handleInput();
        });

        clickArea.addEventListener('mousedown', (e) => {
            e.preventDefault(); // Prevent text selection
            handleInput();
        });

        // Start immediately for now
        startGame();

    </script>
</body>

</html>